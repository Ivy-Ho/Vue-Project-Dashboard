(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aabb3e50"],{"99af":function(t,a,n){"use strict";var i=n("23e7"),e=n("d039"),s=n("e8b5"),o=n("861d"),r=n("7b0b"),c=n("50c4"),u=n("8418"),d=n("65f0"),l=n("1dde"),p=n("b622"),h=n("2d00"),f=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",b=h>=51||!e((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),C=l("concat"),m=function(t){if(!o(t))return!1;var a=t[f];return void 0!==a?!!a:s(t)},y=!b||!C;i({target:"Array",proto:!0,forced:y},{concat:function(t){var a,n,i,e,s,o=r(this),l=d(o,0),p=0;for(a=-1,i=arguments.length;a<i;a++)if(s=-1===a?o:arguments[a],m(s)){if(e=c(s.length),p+e>g)throw TypeError(v);for(n=0;n<e;n++,p++)n in s&&u(l,p,s[n])}else{if(p>=g)throw TypeError(v);u(l,p++,s)}return l.length=p,l}})},b789:function(t,a,n){"use strict";n.r(a);var i=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"cart container"},[n("h2",{staticClass:"text-center"},[t._v("這裡是前台-購物車頁面")]),n("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),n("div",{staticClass:"my-5 row justify-content-center"},[n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"text-right mb-3"},[n("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:t.removeAllCartItem}},[n("i",{staticClass:"far fa-trash-alt"},[t._v(" 刪除所有品項")])])]),n("table",{staticClass:"table"},[t._m(0),t.cart.length?n("tbody",t._l(t.cart,(function(a){return n("tr",{key:a.id},[n("td",{staticClass:"align-middle"},[n("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:t.status.loadingDeleteCart===a.product.id},on:{click:function(n){return t.removeCartItem(a.product.id)}}},[t.status.loadingDeleteCart===a.product.id?n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):n("i",{staticClass:"far fa-trash-alt"})])]),n("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" ")]),n("td",{staticClass:"align-middle"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-prepend"},[n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(n){a.quantity--,t.updateQuantity(a.product.id,a.quantity)}}},[t._v(" - ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"form-control text-center",attrs:{id:"inlineFormInputGroupUsername",type:"number",min:"1"},domProps:{value:a.quantity},on:{change:function(n){return t.updateQuantity(a.product.id,a.quantity)},input:function(n){n.target.composing||t.$set(a,"quantity",n.target.value)}}}),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:t.status.loadingUpdateCart===a.product.id},on:{click:function(n){a.quantity++,t.updateQuantity(a.product.id,a.quantity)}}},[t.status.loadingUpdateCart===a.product.id?n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):n("span",[t._v("+")])])])])]),n("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.unit)+" ")]),n("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("thousands")(a.product.price))+" ")])])})),0):t._e(),n("tfoot",[n("tr",[n("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v(" 總計 ")]),n("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("thousands")(t.cartTotal))+" ")])])])]),n("router-link",{attrs:{to:"/checkout"}},[n("button",{staticClass:"btn btn-primary w-100"},[t._v("訂單結帳")])])],1)])],1)},e=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("thead",[n("th",[t._v("刪除")]),n("th",[t._v("品名")]),n("th",{attrs:{width:"150px"}},[t._v(" 數量 ")]),n("th",[t._v("單位")]),n("th",[t._v("單價")])])}],s=(n("99af"),n("4160"),n("159b"),{name:"cart",data:function(){return{cart:[],cartTotal:0,isLoading:!1,fullPage:!0,status:{loadingUpdateCart:"",loadingDeleteCart:""}}},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping");this.$http.get(a).then((function(a){t.isLoading=!1,t.cart=a.data.data,t.updateTotal()})).catch((function(a){t.isLoading=!1,console.log(a)}))},updateTotal:function(){var t=this;this.cartTotal=0,this.cart.forEach((function(a){t.cartTotal+=a.product.price*a.quantity}))},updateQuantity:function(t,a){var n=this;this.status.loadingUpdateCart=t;var i="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping"),e={product:t,quantity:a};this.$http.patch(i,e).then((function(){n.status.loadingUpdateCart="",n.getCart()})).catch((function(t){n.status.loadingUpdateCart="",console.log(t)}))},removeAllCartItem:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping/all/product");this.$http.delete(a).then((function(a){t.isLoading=!1,console.log(a),t.getCart()})).catch((function(a){t.isLoading=!1,console.log(a)}))},removeCartItem:function(t){var a=this;this.status.loadingDeleteCart=t;var n="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping/").concat(t);this.$http.delete(n,t).then((function(){a.status.loadingDeleteCart=t,a.getCart()})).catch((function(t){console.log(t)}))}},created:function(){this.getCart()}}),o=s,r=n("2877"),c=Object(r["a"])(o,i,e,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-aabb3e50.8df7f74d.js.map