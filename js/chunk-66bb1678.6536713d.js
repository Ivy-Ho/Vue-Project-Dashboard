(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66bb1678"],{"5a3e":function(t,a,n){},8242:function(t,a,n){"use strict";var s=n("c34b"),e=n.n(s);e.a},"88e9":function(t,a,n){"use strict";n.r(a);var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"layout"},[n("Navbar"),n("router-view"),t._m(0)],1)},e=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("footer",{staticClass:"px-4 py-3 bg-light text-center"},[n("p",{staticClass:"mb-0"},[t._v("© Copyright 2020 "),n("span",{staticClass:"logo-ff"},[t._v("迴圈 ∞ 選框")])])])}],i=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light opacity09"},[n("router-link",{staticClass:"navbar-brand",attrs:{to:{name:"Home"}}},[n("h1",{staticClass:"logo-ff logo-fz text-secondary mb-0"},[t._v(" 迴圈 ∞ 選框 ")])]),t._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[n("ul",{staticClass:"navbar-nav ml-auto"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("首頁 "),n("span",{staticClass:"sr-only"},[t._v("(current)")])])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[t._v("品牌故事")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/products"}},[t._v("產品列表")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/cart"}},[t._v("購物車")])],1),n("li",{staticClass:"nav-item"},[n("div",{staticClass:"dropdown"},[t._m(1),n("CartDropDown")],1)])])])],1)},o=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("button",{staticClass:"btn btn-sm position-relative",attrs:{"data-toggle":"dropdown"}},[n("i",{staticClass:"fas fa-shopping-cart text-dark fa-2x",attrs:{"aria-hidden":"true"}}),n("span",{staticClass:"badge-pill badge-danger position-absolute bage-position"},[t._v("2")])])}],r=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),n("div",{staticClass:"dropdown-menu dropdown-menu-right ",staticStyle:{"min-width":"350px"}},[n("div",{staticClass:"px-4 py-3"},[n("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[n("h6",[t._v("已選擇商品")]),n("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:t.removeAllCartItem}},[n("i",{staticClass:"far fa-trash-alt"},[t._v(" 清空購物車")])])]),n("table",{staticClass:"table"},[t.cart.length?n("tbody",t._l(t.cart,(function(a){return n("tr",{key:a.id},[n("td",{staticClass:"align-middle"},[n("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:t.status.loadingDeleteCart===a.product.id},on:{click:function(n){return t.removeCartItem(a.product.id)}}},[t.status.loadingDeleteCart===a.product.id?n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):n("i",{staticClass:"far fa-trash-alt"})])]),n("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" ")]),n("td",[t._v(" "+t._s(a.quantity)+t._s(a.product.unit)+" ")]),n("td",[t._v(" "+t._s(t._f("thousands")(a.product.price))+" ")])])})),0):t._e()]),n("router-link",{attrs:{to:"/checkout"}},[n("button",{staticClass:"btn btn-primary w-100"},[t._v("結帳去")])])],1)])],1)},c=[],l=(n("99af"),n("4160"),n("159b"),{name:"Cartmodal",data:function(){return{cart:[],cartTotal:0,isLoading:!1,fullPage:!0,status:{loadingUpdateCart:"",loadingDeleteCart:""}}},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping");this.$http.get(a).then((function(a){t.isLoading=!1,t.cart=a.data.data,t.updateTotal()})).catch((function(a){t.isLoading=!1,console.log(a)}))},updateTotal:function(){var t=this;this.cartTotal=0,this.cart.forEach((function(a){t.cartTotal+=a.product.price*a.quantity}))},updateQuantity:function(t,a){var n=this;this.status.loadingUpdateCart=t;var s="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping"),e={product:t,quantity:a};this.$http.patch(s,e).then((function(){n.status.loadingUpdateCart="",n.getCart()})).catch((function(t){n.status.loadingUpdateCart="",console.log(t)}))},removeAllCartItem:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping/all/product");this.$http.delete(a).then((function(a){t.isLoading=!1,console.log(a),t.getCart()})).catch((function(a){t.isLoading=!1,console.log(a)}))},removeCartItem:function(t){var a=this;this.status.loadingDeleteCart=t;var n="".concat("https://course-ec-api.hexschool.io/","api/").concat("8a9d1554-1794-46f4-9f77-1517fa6cb261","/ec/shopping/").concat(t);this.$http.delete(n,t).then((function(){a.status.loadingDeleteCart=t,a.getCart()})).catch((function(t){console.log(t)}))}},created:function(){this.getCart()}}),u=l,d=n("2877"),p=Object(d["a"])(u,r,c,!1,null,null,null),f=p.exports,v={name:"Navbar",components:{CartDropDown:f}},h=v,g=(n("8a3d"),Object(d["a"])(h,i,o,!1,null,"53b5405c",null)),b=g.exports,C={name:"Layout",components:{Navbar:b},data:function(){return{}}},m=C,_=(n("8242"),Object(d["a"])(m,s,e,!1,null,null,null));a["default"]=_.exports},"8a3d":function(t,a,n){"use strict";var s=n("5a3e"),e=n.n(s);e.a},"99af":function(t,a,n){"use strict";var s=n("23e7"),e=n("d039"),i=n("e8b5"),o=n("861d"),r=n("7b0b"),c=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),p=n("b622"),f=n("2d00"),v=p("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",b=f>=51||!e((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),C=d("concat"),m=function(t){if(!o(t))return!1;var a=t[v];return void 0!==a?!!a:i(t)},_=!b||!C;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,n,s,e,i,o=r(this),d=u(o,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(i=-1===a?o:arguments[a],m(i)){if(e=c(i.length),p+e>h)throw TypeError(g);for(n=0;n<e;n++,p++)n in i&&l(d,p,i[n])}else{if(p>=h)throw TypeError(g);l(d,p++,i)}return d.length=p,d}})},c34b:function(t,a,n){}}]);
//# sourceMappingURL=chunk-66bb1678.6536713d.js.map